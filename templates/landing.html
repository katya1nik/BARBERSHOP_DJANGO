{% extends 'base.html' %}

{% block title %}–ë–∞—Ä–±–µ—Ä—à–æ–ø - –ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-1">‚úÇÔ∏è –ë–∞—Ä–±–µ—Ä—à–æ–ø</h1>
    <p class="lead">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º—É–∂—á–∏–Ω</p>
</div>

<!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
<div class="section">
    <h2>üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏</h2>
    <div class="row">
        {% for service in popular_services %}
            <div class="col-md-6 col-lg-4">
                <div class="service">
                    <h3>{{ service.name }}</h3>
                    <p>{{ service.description }}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="price">{{ service.price }} ‚ÇΩ</span>
                        <small class="text-muted">{{ service.duration }} –º–∏–Ω</small>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center text-muted">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- –ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞ -->
<div class="section">
    <h2>üë®‚Äçüíº –ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞</h2>
    <div class="row">
        {% for master in masters %}
            <div class="col-md-6 col-lg-4">
                <div class="master">
                    <h3>{{ master.name }}</h3>
                    <p><strong>–û–ø—ã—Ç:</strong> {{ master.experience }} –ª–µ—Ç</p>
                    <p class="text-muted">{{ master.specialization }}</p>
                    <a href="{% url 'core:master_detail' master.id %}" class="btn btn-primary btn-sm">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center text-muted">–ú–∞—Å—Ç–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- –û—Ç–∑—ã–≤—ã -->
<div class="section">
    <h2>‚≠ê –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</h2>
    <div class="row">
        {% for review in recent_reviews %}
            <div class="col-md-6">
                <div class="review">
                    <h4>{{ review.client_name }}</h4>
                    <p>"{{ review.text }}"</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-warning">
                            {% for i in "12345"|slice:":"|slice:review.rating %}‚≠ê{% endfor %}
                        </span>
                        <small class="text-muted">{{ review.date_created|date:"d.m.Y" }}</small>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center text-muted">–û—Ç–∑—ã–≤—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- –§–æ—Ä–º–∞ –±—ã—Å—Ç—Ä–æ–π –∑–∞–ø–∏—Å–∏ -->
<div class="section">
    <h2>üìÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å</h2>
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <form method="post" class="card">
                <div class="card-body">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>üë§ –í–∞—à–µ –∏–º—è:</label>
                                <input type="text" name="name" class="form-control" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>üì± –¢–µ–ª–µ—Ñ–æ–Ω:</label>
                                <input type="tel" name="phone" class="form-control" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>üë®‚Äçüíº –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞:</label>
                                <select name="master" class="form-control">
                                    {% for master in masters %}
                                        <option value="{{ master.id }}">{{ master.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</label>
                                <input type="datetime-local" name="appointment_date" class="form-control" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>‚úÇÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏:</label>
                        <div class="row">
                            {% for service in services %}
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input type="checkbox" name="services" value="{{ service.id }}" 
                                               id="service_{{ service.id }}" class="form-check-input">
                                        <label for="service_{{ service.id }}" class="form-check-label">
                                            {{ service.name }} <span class="price">{{ service.price }} ‚ÇΩ</span>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                        <textarea name="comment" rows="3" class="form-control" 
                                  placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è..."></textarea>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-warning btn-lg">
                            üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
